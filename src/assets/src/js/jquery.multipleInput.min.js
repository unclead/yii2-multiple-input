!function(t){t.fn.multipleInput=function(e){return l[e]?l[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.multipleInput"),!1):l.init.apply(this,arguments)};var e={afterInit:"afterInit",afterAddRow:"afterAddRow",beforeDeleteRow:"beforeDeleteRow",afterDeleteRow:"afterDeleteRow"},i={id:null,template:null,jsTemplates:[],btnType:null,limit:1},n={enableAjaxValidation:!1,validateOnBlur:!1,validateOnChange:!1,validateOnType:!1},l={init:function(r){var a=t.extend(!0,{},i,r||{}),u=t("#"+a.id),p=u.closest("form"),o=this.selector.replace("#","");u.data("multipleInput",{settings:a,currentIndex:0,attributeDefaults:{}}),t(document).on("click.multipleInput","#"+a.id+" .js-input-remove",function(t){t.preventDefault(),l.removeInput.apply(this)}),t(document).on("click.multipleInput","#"+a.id+" .js-input-plus",function(t){t.preventDefault(),l.addInput.apply(this)});var d=setInterval(function(){if("object"==typeof p.data("yiiActiveForm")){var i=p.yiiActiveForm("find",o),r=[];"object"==typeof i&&(t.each(i,function(t,e){-1==["id","input","container"].indexOf(t)&&(r[t]=e)}),p.yiiActiveForm("remove",o));var s=t.extend({},n,a.attributeOptions);t.each(s,function(t,e){"undefined"==typeof r[t]&&(r[t]=e)}),u.data("multipleInput").attributeDefaults=r,u.find(".multiple-input-list").find("input, select, textarea").each(function(){l.addAttribute.apply(this)}),u.data("multipleInput").currentIndex=u.find(".multiple-input-list__item").length,clearInterval(d);var f=t.Event(e.afterInit);u.trigger(f)}},100)},addInput:function(){var i=t(this).closest(".multiple-input").first(),n=i.data("multipleInput"),r=n.settings,a=r.template,u=i.find(".multiple-input-list").first(),p=i.find(".multiple-input-list__item").length;if(!(null!=r.limit&&p>=r.limit)){var o=["{multiple-index}","{multiple-btn-type}","{multiple-value}"],d=[n.currentIndex,r.btnType,""];for(var s in o)a=a.replaceAll(o[s],d[s]);t(a).hide().appendTo(u).fadeIn(300),t(a).find("input, select, textarea").each(function(){l.addAttribute.apply(this)});var f;for(s in r.jsTemplates)f=r.jsTemplates[s].replaceAll("{multiple-index}",n.currentIndex),window.eval(f);i.data("multipleInput").currentIndex++;var c=t.Event(e.afterAddRow);i.trigger(c)}},removeInput:function(){var i=t(this).closest(".multiple-input").first(),n=t(this).closest(".multiple-input-list__item"),r=t.Event(e.beforeDeleteRow);i.trigger(r),r.result!==!1&&(n.find("input, select, textarea").each(function(){l.removeAttribute.apply(this)}),n.fadeOut(300,function(){t(this).remove()}),r=t.Event(e.afterDeleteRow),i.trigger(r))},addAttribute:function(){var e=t(this).attr("id"),i=t("#"+t(this).attr("id")),n=i.closest(".multiple-input").first(),l=i.closest("form");if(0!=n.length){var r=n.data("multipleInput");l.yiiActiveForm("add",t.extend({},r.attributeDefaults,{id:e,input:"#"+e,container:".field-"+e}))}},removeAttribute:function(){var e=t(this).attr("id"),i=t("#"+t(this).attr("id")).closest("form");0!==i.length&&i.yiiActiveForm("remove",e)}};String.prototype.replaceAll=function(t,e){return this.split(t).join(e)}}(window.jQuery);